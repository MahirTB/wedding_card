<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wedding Invitation</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Manrope:wght@400;500;600&display=swap" rel="stylesheet" />
  <style>
    :root {
      --white: #ffffff;
      --lilac-50: #fcf8ff;
      --lilac-100: #f5ebff;
      --lilac-200: #ead8ff;
      --lilac-300: #dbc1ff;
      --lilac-500: #b98ce6;
      --lilac-700: #7e59a7;
      --ink: #3a2f49;
      --muted: #6f6480;
      --shadow: 0 18px 45px rgba(126, 89, 167, 0.16);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html,
    body {
      width: 100%;
      max-width: 100%;
      overflow-x: clip;
    }

    body {
      min-height: 100vh;
      font-family: "Manrope", sans-serif;
      color: var(--ink);
      background:
        radial-gradient(circle at 18% 18%, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0) 42%),
        radial-gradient(circle at 82% 10%, rgba(234, 216, 255, 0.55) 0%, rgba(234, 216, 255, 0) 44%),
        linear-gradient(145deg, var(--white) 0%, var(--lilac-50) 52%, #f9f3ff 100%);
      background-size: 130% 130%, 150% 150%, 160% 160%;
      animation: skyDrift 24s ease-in-out infinite alternate;
      display: grid;
      place-items: center;
      padding: 28px;
      position: relative;
      overflow-x: clip;
      overflow-y: auto;
      isolation: isolate;
    }

    body::before,
    body::after {
      content: "";
      position: fixed;
      z-index: 0;
      pointer-events: none;
      background-repeat: no-repeat;
      will-change: transform, opacity, filter;
    }

    body::before {
      inset: auto -20% -34% -20%;
      height: 70vh;
      border-radius: 48% 52% 0 0 / 22% 25% 0 0;
      background:
        linear-gradient(
          100deg,
          rgba(219, 193, 255, 0.78) 0%,
          rgba(185, 140, 230, 0.58) 30%,
          rgba(233, 208, 255, 0.8) 58%,
          rgba(206, 164, 246, 0.56) 100%
        );
      background-size: 220% 100%;
      animation: waveDrift 15s linear infinite, waveSwell 6s ease-in-out infinite alternate;
    }

    body::after {
      z-index: 0;
      inset: auto -26% -42% -26%;
      height: 78vh;
      border-radius: 54% 46% 0 0 / 28% 24% 0 0;
      background:
        linear-gradient(
          118deg,
          rgba(243, 230, 255, 0.72) 0%,
          rgba(219, 193, 255, 0.62) 40%,
          rgba(185, 140, 230, 0.48) 70%,
          rgba(245, 235, 255, 0.74) 100%
        );
      background-size: 240% 100%;
      animation: waveDriftReverse 19s linear infinite, waveSwell 8s ease-in-out infinite alternate-reverse;
      filter: blur(2px);
    }

    .ambient-bg {
      position: fixed;
      inset: -8%;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
      will-change: transform;
    }

    .shooting-stars {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 1;
      overflow: hidden;
      will-change: transform;
    }

    .shooting-star {
      position: absolute;
      top: 0;
      left: 0;
      width: var(--star-size, 2.2px);
      height: var(--star-size, 2.2px);
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.98);
      box-shadow:
        0 0 11px rgba(255, 255, 255, 0.98),
        0 0 22px rgba(219, 193, 255, 0.92);
      transform: translate3d(var(--start-x, 0), var(--start-y, -20vh), 0) rotate(var(--star-angle, -18deg));
      opacity: 0;
      animation: starFall var(--fall-duration, 7s) linear var(--fall-delay, 0s) infinite;
      will-change: transform, opacity;
    }

    .shooting-star::after {
      content: "";
      position: absolute;
      left: -64px;
      top: 50%;
      transform: translateY(-50%);
      width: 64px;
      height: 2.4px;
      background: linear-gradient(90deg, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.92));
      filter: blur(0.5px);
      opacity: 0.9;
    }


    .ambient-bg span {
      position: absolute;
      border-radius: 50%;
      mix-blend-mode: screen;
      filter: blur(10px);
      opacity: 0.52;
      will-change: transform, opacity;
    }

    .ambient-bg span:nth-child(1) {
      width: 42vw;
      height: 42vw;
      min-width: 360px;
      min-height: 360px;
      left: -8%;
      top: -16%;
      background: radial-gradient(circle, rgba(219, 193, 255, 0.56) 0%, rgba(219, 193, 255, 0) 68%);
      animation: blobFloatA 20s ease-in-out infinite alternate;
    }

    .ambient-bg span:nth-child(2) {
      width: 34vw;
      height: 34vw;
      min-width: 280px;
      min-height: 280px;
      right: -6%;
      top: 18%;
      background: radial-gradient(circle, rgba(185, 140, 230, 0.42) 0%, rgba(185, 140, 230, 0) 72%);
      animation: blobFloatB 24s ease-in-out infinite alternate;
    }

    .ambient-bg span:nth-child(3) {
      width: 46vw;
      height: 46vw;
      min-width: 390px;
      min-height: 390px;
      left: 30%;
      bottom: -30%;
      background: radial-gradient(circle, rgba(245, 235, 255, 0.62) 0%, rgba(245, 235, 255, 0) 70%);
      animation: blobFloatC 26s ease-in-out infinite alternate;
    }

    .card {
      width: min(760px, 100%);
      background: rgba(255, 255, 255, 0.86);
      border: 1px solid rgba(185, 140, 230, 0.3);
      border-radius: 28px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(4px);
      overflow: hidden;
      animation: rise 900ms ease-out forwards;
      opacity: 0;
      transform: translateY(18px);
      position: relative;
      z-index: 3;
      overflow-x: hidden;
    }

    .card-glow {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      background:
        radial-gradient(circle at 18% 22%, rgba(219, 193, 255, 0.22), rgba(219, 193, 255, 0) 38%),
        radial-gradient(circle at 84% 16%, rgba(185, 140, 230, 0.18), rgba(185, 140, 230, 0) 34%),
        radial-gradient(circle at 52% 88%, rgba(245, 235, 255, 0.34), rgba(245, 235, 255, 0) 40%);
      animation: glowShift 18s ease-in-out infinite alternate;
    }

    .sparkles {
      position: absolute;
      inset: 0;
      overflow: hidden;
      pointer-events: none;
      z-index: 0;
    }

    .sparkles span {
      position: absolute;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0) 70%);
      opacity: 0;
      animation: sparkleFloat 7.5s ease-in-out infinite;
    }

    .sparkles span::before,
    .sparkles span::after {
      content: "";
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 999px;
    }

    .sparkles span::before {
      width: 11px;
      height: 1px;
    }

    .sparkles span::after {
      width: 1px;
      height: 11px;
    }

    .sparkles span:nth-child(1) { top: 14%; left: 16%; animation-delay: 0s; }
    .sparkles span:nth-child(2) { top: 24%; left: 78%; animation-delay: 1.1s; }
    .sparkles span:nth-child(3) { top: 42%; left: 30%; animation-delay: 2.2s; }
    .sparkles span:nth-child(4) { top: 58%; left: 72%; animation-delay: 3.3s; }
    .sparkles span:nth-child(5) { top: 70%; left: 20%; animation-delay: 4.4s; }
    .sparkles span:nth-child(6) { top: 82%; left: 58%; animation-delay: 5.2s; }

    .card::before,
    .card::after {
      content: "";
      position: absolute;
      border-radius: 50%;
      pointer-events: none;
      filter: blur(1px);
      z-index: 0;
      will-change: transform, opacity;
    }

    .card::before {
      width: 320px;
      height: 320px;
      top: -160px;
      right: -130px;
      background: radial-gradient(circle, rgba(185, 140, 230, 0.28) 0%, rgba(185, 140, 230, 0) 68%);
      animation: orbFloat 10s ease-in-out infinite alternate;
    }

    .card::after {
      width: 300px;
      height: 300px;
      bottom: -170px;
      left: -130px;
      background: radial-gradient(circle, rgba(219, 193, 255, 0.3) 0%, rgba(219, 193, 255, 0) 72%);
      animation: orbFloat 12s ease-in-out infinite alternate-reverse;
    }

    .top {
      padding: 54px 52px 34px;
      text-align: center;
      position: relative;
      background: linear-gradient(180deg, rgba(245, 235, 255, 0.85) 0%, rgba(255, 255, 255, 0.95) 100%);
      z-index: 1;
      overflow: hidden;
    }

    .top::after {
      content: "";
      position: absolute;
      inset: -120% -40%;
      background: linear-gradient(
        108deg,
        rgba(255, 255, 255, 0) 36%,
        rgba(255, 255, 255, 0.42) 50%,
        rgba(255, 255, 255, 0) 64%
      );
      transform: translateX(-52%) rotate(9deg);
      animation: shineSweep 7s ease-in-out infinite;
      pointer-events: none;
    }

    .tag {
      letter-spacing: 0.22em;
      text-transform: uppercase;
      font-size: 0.74rem;
      color: var(--muted);
      margin-bottom: 16px;
    }

    h1 {
      font-family: "Cormorant Garamond", serif;
      font-size: clamp(2.25rem, 4vw, 3.4rem);
      line-height: 1;
      font-weight: 600;
      color: var(--lilac-700);
      margin-bottom: 10px;
      animation: fade 700ms 220ms ease-out both;
    }

    .subtitle {
      font-size: 1rem;
      color: var(--muted);
      animation: fade 700ms 360ms ease-out both;
    }

    .divider {
      width: 120px;
      height: 1px;
      margin: 26px auto;
      background: linear-gradient(90deg, transparent, var(--lilac-300), transparent);
      animation: fade 700ms 480ms ease-out both;
    }

    .names {
      font-family: "Cormorant Garamond", serif;
      font-size: clamp(2rem, 5vw, 3.3rem);
      line-height: 1.12;
      color: var(--ink);
      animation: fade 800ms 560ms ease-out both, namesGlow 5.5s ease-in-out 1.1s infinite;
      position: relative;
      display: inline-block;
      text-shadow: 0 8px 24px rgba(126, 89, 167, 0.1);
    }

    .details {
      padding: 34px 52px 52px;
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 18px;
      animation: fade 700ms 760ms ease-out both;
      position: relative;
      z-index: 1;
    }

    .detail {
      background: linear-gradient(175deg, var(--white), var(--lilac-50));
      border: 1px solid rgba(185, 140, 230, 0.3);
      border-radius: 18px;
      padding: 18px;
      text-align: center;
      opacity: 0;
      transform: translateY(16px) scale(0.98);
      animation: cardIn 700ms ease-out forwards;
      transition: transform 220ms ease, box-shadow 220ms ease, border-color 220ms ease;
    }

    .detail:nth-child(1) {
      animation-delay: 830ms;
    }

    .detail:nth-child(2) {
      animation-delay: 940ms;
    }

    .detail:nth-child(3) {
      animation-delay: 1050ms;
    }

    .detail:hover {
      transform: translateY(-4px) scale(1.01);
      box-shadow: 0 16px 28px rgba(126, 89, 167, 0.13);
      border-color: rgba(185, 140, 230, 0.52);
    }

    .label {
      font-size: 0.72rem;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--muted);
      margin-bottom: 8px;
    }

    .value {
      font-size: 1rem;
      line-height: 1.4;
      font-weight: 600;
      color: var(--ink);
    }

    .footer {
      margin-top: 10px;
      font-size: 0.92rem;
      color: var(--muted);
      text-align: center;
      padding: 0 52px 42px;
      animation: fade 700ms 920ms ease-out both;
      position: relative;
      z-index: 1;
    }

    .cta {
      margin-top: 15px;
      display: inline-block;
      position: relative;
      overflow: hidden;
      text-decoration: none;
      color: var(--white);
      background: linear-gradient(135deg, var(--lilac-500), #a674d8);
      border-radius: 999px;
      padding: 11px 22px;
      font-size: 0.88rem;
      font-weight: 600;
      letter-spacing: 0.05em;
      transition: transform 180ms ease, box-shadow 180ms ease;
      box-shadow: 0 10px 24px rgba(126, 89, 167, 0.28);
      animation: ctaPulse 2.4s ease-in-out 1.2s infinite;
    }

    .cta-ripple {
      position: absolute;
      left: 0;
      top: 0;
      border-radius: 50%;
      pointer-events: none;
      transform: translate(-50%, -50%) scale(0);
      background: radial-gradient(circle, rgba(255, 255, 255, 0.72) 0%, rgba(255, 255, 255, 0) 72%);
      animation: ctaRipple 650ms ease-out forwards;
    }

    .cta:hover {
      transform: translateY(-2px);
      box-shadow: 0 14px 26px rgba(126, 89, 167, 0.35);
    }

    .confetti-canvas {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 20;
    }

    @keyframes rise {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fade {
      from {
        opacity: 0;
        transform: translateY(8px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes waveDrift {
      0% {
        background-position: 0% 50%;
      }
      100% {
        background-position: 100% 50%;
      }
    }

    @keyframes waveDriftReverse {
      0% {
        background-position: 100% 50%;
      }
      100% {
        background-position: 0% 50%;
      }
    }

    @keyframes waveSwell {
      0% {
        transform: translateY(0);
      }
      100% {
        transform: translateY(-24px);
      }
    }

    @keyframes orbFloat {
      0% {
        transform: translate(0, 0) scale(1);
        opacity: 0.65;
      }
      50% {
        opacity: 0.82;
      }
      100% {
        transform: translate(14px, 18px) scale(1.08);
        opacity: 0.62;
      }
    }

    @keyframes shineSweep {
      0% {
        transform: translateX(-58%) rotate(9deg);
        opacity: 0;
      }
      12% {
        opacity: 0.9;
      }
      28% {
        opacity: 0;
      }
      100% {
        transform: translateX(58%) rotate(9deg);
        opacity: 0;
      }
    }

    @keyframes cardIn {
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    @keyframes ctaPulse {
      0% {
        box-shadow: 0 10px 24px rgba(126, 89, 167, 0.24);
      }
      50% {
        box-shadow: 0 14px 32px rgba(126, 89, 167, 0.36);
      }
      100% {
        box-shadow: 0 10px 24px rgba(126, 89, 167, 0.24);
      }
    }

    @keyframes ctaRipple {
      0% {
        opacity: 0.85;
        transform: translate(-50%, -50%) scale(0);
      }
      100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(1);
      }
    }

    @keyframes skyDrift {
      0% {
        background-position: 0% 0%, 100% 0%, 50% 0%;
      }
      50% {
        background-position: 8% 6%, 94% 10%, 54% 50%;
      }
      100% {
        background-position: 14% 12%, 88% 14%, 58% 100%;
      }
    }

    @keyframes blobFloatA {
      0% {
        transform: translate(0, 0) scale(1);
        opacity: 0.45;
      }
      100% {
        transform: translate(8%, 10%) scale(1.14);
        opacity: 0.6;
      }
    }

    @keyframes blobFloatB {
      0% {
        transform: translate(0, 0) scale(1);
        opacity: 0.4;
      }
      100% {
        transform: translate(-10%, 7%) scale(1.16);
        opacity: 0.58;
      }
    }

    @keyframes blobFloatC {
      0% {
        transform: translate(0, 0) scale(1);
        opacity: 0.42;
      }
      100% {
        transform: translate(-8%, -8%) scale(1.12);
        opacity: 0.6;
      }
    }

    @keyframes starFall {
      0% {
        opacity: 0;
        transform: translate3d(var(--start-x, 0), var(--start-y, -20vh), 0) rotate(var(--star-angle, -18deg));
      }
      8% {
        opacity: var(--star-opacity, 0.7);
      }
      70% {
        opacity: var(--star-opacity, 0.7);
      }
      100% {
        opacity: 0;
        transform: translate3d(var(--end-x, 100vw), var(--end-y, 120vh), 0) rotate(var(--star-angle, -18deg));
      }
    }

    @keyframes glowShift {
      0% {
        transform: scale(1) translate(0, 0);
        opacity: 0.8;
      }
      50% {
        transform: scale(1.02) translate(8px, -5px);
        opacity: 1;
      }
      100% {
        transform: scale(1.03) translate(-6px, 8px);
        opacity: 0.82;
      }
    }

    @keyframes sparkleFloat {
      0% {
        opacity: 0;
        transform: translateY(6px) scale(0.7) rotate(0deg);
      }
      20% {
        opacity: 0.8;
      }
      55% {
        opacity: 0.95;
      }
      100% {
        opacity: 0;
        transform: translateY(-18px) scale(1.16) rotate(18deg);
      }
    }

    @keyframes namesGlow {
      0% {
        text-shadow: 0 8px 24px rgba(126, 89, 167, 0.1);
      }
      50% {
        text-shadow: 0 12px 32px rgba(126, 89, 167, 0.22);
      }
      100% {
        text-shadow: 0 8px 24px rgba(126, 89, 167, 0.1);
      }
    }

    @media (prefers-reduced-motion: reduce) {
      body::before,
      body::after {
        animation-duration: 26s;
      }

      body,
      .ambient-bg span,
      .shooting-star,
      .card-glow,
      .sparkles span,
      .card::before,
      .card::after,
      .top::after,
      .names,
      .detail,
      .cta {
        animation: none !important;
        opacity: 1;
        transform: none;
      }

      .cta-ripple {
        display: none;
      }
    }

    @media (max-width: 760px) {
      body {
        min-height: 100svh;
        padding: clamp(16px, 4vh, 28px) 12px;
        align-items: center;
        animation: none;
        background-size: auto;
      }

      .card {
        width: min(540px, 88vw);
        max-height: 78svh;
        overflow-y: auto;
        overflow-x: hidden;
        -webkit-overflow-scrolling: touch;
      }

      .card-glow,
      .sparkles,
      .top::after,
      .ambient-bg {
        display: none;
      }

      .card {
        backdrop-filter: none;
      }

      .shooting-star {
        box-shadow: 0 0 6px rgba(255, 255, 255, 0.7);
      }

      .shooting-star::after {
        width: 42px;
        left: -42px;
        opacity: 0.7;
      }

      .top,
      .details,
      .footer {
        padding-left: 18px;
        padding-right: 18px;
      }

      .top {
        padding-top: 30px;
        padding-bottom: 24px;
      }

      .details {
        padding-top: 20px;
        padding-bottom: 24px;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 12px;
      }

      .detail:last-child {
        grid-column: 1 / -1;
      }

      .names {
        font-size: clamp(1.7rem, 8.6vw, 2.35rem);
      }

      h1 {
        font-size: clamp(2rem, 8vw, 2.65rem);
      }

      .footer {
        padding-top: 6px;
        padding-bottom: 24px;
      }

      .cta {
        margin-top: 12px;
      }
    }
  </style>
</head>
<body>
  <div class="ambient-bg" aria-hidden="true">
    <span></span>
    <span></span>
    <span></span>
  </div>
  <div class="shooting-stars" id="shootingStars" aria-hidden="true"></div>
  <main class="card" aria-label="Wedding invitation card">
    <div class="card-glow" aria-hidden="true"></div>
    <div class="sparkles" aria-hidden="true">
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
    </div>
    <section class="top">
      <p class="tag">Together with their families</p>
      <h1>Wedding Invitation</h1>
      <p class="subtitle">You are warmly invited to celebrate the joy of our union.</p>
      <div class="divider" aria-hidden="true"></div>
      <p class="names">Fatema Tuj Johora<br />&amp;<br />Rakib Ul Islam</p>
    </section>

    <section class="details">
      <article class="detail">
        <p class="label">Date</p>
        <p class="value">Friday, April 10, 2026</p>
      </article>
      <article class="detail">
        <p class="label">Time</p>
        <p class="value">8:30 PM</p>
      </article>
      <article class="detail">
        <p class="label">Venue</p>
        <p class="value">Benaroshi Community Center<br />Mohammadbag, Rayerbag</p>
      </article>
    </section>

    <section class="footer">
      We would be very happy to have you celebrate this beautiful day with us.
      <br />
      <a href="#" class="cta" id="rsvpBtn">Let's Celebrate!</a>
    </section>
  </main>
  <canvas id="confettiCanvas" class="confetti-canvas" aria-hidden="true"></canvas>

  <script>
    (() => {
      const button = document.getElementById("rsvpBtn");
      const canvas = document.getElementById("confettiCanvas");
      const ctx = canvas.getContext("2d");
      const card = document.querySelector(".card");
      const ambientBg = document.querySelector(".ambient-bg");
      const shootingStars = document.getElementById("shootingStars");
      const confetti = [];
      let rafId = null;
      let starRampId = null;
      let parallaxRafId = null;
      let canvasScale = 1;
      let viewportWidth = window.innerWidth;
      let viewportHeight = window.innerHeight;

      const colors = ["#b98ce6", "#dbc1ff", "#7e59a7", "#f5ebff", "#ffffff"];
      const starRampDuration = 14000;
      const MOBILE_BREAKPOINT = 760;

      function isMobileView() {
        return window.innerWidth <= MOBILE_BREAKPOINT;
      }

      function resizeCanvas() {
        const width = window.innerWidth;
        const height = window.innerHeight;
        viewportWidth = width;
        viewportHeight = height;
        canvasScale = Math.min(window.devicePixelRatio || 1, isMobileView() ? 1.2 : 2);
        canvas.width = Math.round(width * canvasScale);
        canvas.height = Math.round(height * canvasScale);
        canvas.style.width = `${width}px`;
        canvas.style.height = `${height}px`;
        ctx.setTransform(canvasScale, 0, 0, canvasScale, 0, 0);
      }

      function random(min, max) {
        return Math.random() * (max - min) + min;
      }

      function getStarTarget() {
        return isMobileView() ? 20 : 72;
      }

      function buildShootingStar() {
        const star = document.createElement("span");
        star.className = "shooting-star";

        const startX = random(-20, 110);
        const startY = random(-42, 26);
        const travel = random(34, 62);
        const drift = random(18, 42);

        star.style.setProperty("--star-size", `${random(1.2, 2.8).toFixed(2)}px`);
        star.style.setProperty("--start-x", `${startX}vw`);
        star.style.setProperty("--start-y", `${startY}vh`);
        star.style.setProperty("--end-x", `${startX + drift}vw`);
        star.style.setProperty("--end-y", `${startY + travel}vh`);
        star.style.setProperty("--fall-duration", `${random(3.6, 7.2).toFixed(2)}s`);
        star.style.setProperty("--fall-delay", `${random(-8, 0).toFixed(2)}s`);
        star.style.setProperty("--star-angle", `${random(30, 38).toFixed(2)}deg`);
        star.style.setProperty("--star-opacity", `${random(0.55, 1).toFixed(2)}`);

        return star;
      }

      function appendShootingStars(count) {
        if (!shootingStars || count <= 0) return;
        const fragment = document.createDocumentFragment();

        for (let i = 0; i < count; i += 1) {
          fragment.appendChild(buildShootingStar());
        }

        shootingStars.appendChild(fragment);
      }

      function createShootingStars() {
        if (!shootingStars) return;
        if (starRampId) {
          cancelAnimationFrame(starRampId);
          starRampId = null;
        }

        const fullCount = getStarTarget();
        const baseCount = Math.max(12, Math.round(fullCount * 0.34));
        const startTime = performance.now();

        shootingStars.innerHTML = "";
        appendShootingStars(baseCount);

        const ramp = (now) => {
          const progress = Math.min((now - startTime) / starRampDuration, 1);
          const targetNow = Math.round(baseCount + (fullCount - baseCount) * progress);
          const toAdd = targetNow - shootingStars.childElementCount;

          if (toAdd > 0) {
            appendShootingStars(toAdd);
          }

          if (progress < 1) {
            starRampId = requestAnimationFrame(ramp);
          } else {
            starRampId = null;
          }
        };

        starRampId = requestAnimationFrame(ramp);
      }

      function createCtaRipple(event) {
        if (!button) return;
        const rect = button.getBoundingClientRect();
        const ripple = document.createElement("span");
        ripple.className = "cta-ripple";

        const size = Math.max(rect.width, rect.height) * 1.9;
        const hasPointer =
          Number.isFinite(event.clientX) &&
          Number.isFinite(event.clientY) &&
          event.clientX > 0 &&
          event.clientY > 0;
        const x = hasPointer ? event.clientX - rect.left : rect.width / 2;
        const y = hasPointer ? event.clientY - rect.top : rect.height / 2;

        ripple.style.width = `${size}px`;
        ripple.style.height = `${size}px`;
        ripple.style.left = `${x}px`;
        ripple.style.top = `${y}px`;

        button.appendChild(ripple);
        ripple.addEventListener("animationend", () => ripple.remove(), { once: true });
      }

      function applyScrollParallax() {
        if (isMobileView()) return;
        const scrollSource = window.innerWidth <= 760 && card ? card.scrollTop : window.scrollY;
        const offset = Math.max(0, Math.min(scrollSource, window.innerHeight * 1.2));

        if (ambientBg) {
          ambientBg.style.transform = `translate3d(0, ${(-offset * 0.06).toFixed(2)}px, 0)`;
        }

        if (shootingStars) {
          shootingStars.style.transform = `translate3d(0, ${(offset * 0.04).toFixed(2)}px, 0)`;
        }
      }

      function requestParallaxUpdate() {
        if (parallaxRafId) return;
        parallaxRafId = requestAnimationFrame(() => {
          parallaxRafId = null;
          applyScrollParallax();
        });
      }

      function spawnConfetti() {
        const burstCount = isMobileView() ? 72 : 140;
        const originX = viewportWidth * 0.5;
        const originY = viewportHeight * 0.62;
        const speedMultiplier = isMobileView() ? 0.82 : 1;
        const maxPieces = isMobileView() ? 110 : 220;

        if (confetti.length > maxPieces) {
          confetti.splice(0, confetti.length - maxPieces);
        }

        for (let i = 0; i < burstCount; i += 1) {
          const angle = random(-Math.PI, 0);
          const speed = random(4.5, 11.5) * speedMultiplier;

          confetti.push({
            x: originX + random(-140, 140),
            y: originY + random(-20, 20),
            vx: Math.cos(angle) * speed,
            vy: Math.sin(angle) * speed,
            gravity: random(0.11, 0.2),
            drag: random(0.986, 0.994),
            size: random(isMobileView() ? 4 : 6, isMobileView() ? 8 : 11),
            color: colors[Math.floor(Math.random() * colors.length)],
            rotate: random(0, Math.PI * 2),
            rotateSpeed: random(-0.22, 0.22),
            life: 1
          });
        }

        if (!rafId) {
          animate();
        }
      }

      function animate() {
        ctx.clearRect(0, 0, viewportWidth, viewportHeight);

        for (let i = confetti.length - 1; i >= 0; i -= 1) {
          const piece = confetti[i];
          piece.vx *= piece.drag;
          piece.vy = piece.vy * piece.drag + piece.gravity;
          piece.x += piece.vx;
          piece.y += piece.vy;
          piece.rotate += piece.rotateSpeed;
          piece.life -= isMobileView() ? 0.014 : 0.009;

          if (piece.life <= 0 || piece.y > viewportHeight + 40) {
            confetti.splice(i, 1);
            continue;
          }

          ctx.save();
          ctx.globalAlpha = Math.max(piece.life, 0);
          ctx.translate(piece.x, piece.y);
          ctx.rotate(piece.rotate);
          ctx.fillStyle = piece.color;
          ctx.fillRect(-piece.size / 2, -piece.size / 2, piece.size, piece.size * 0.62);
          ctx.restore();
        }

        if (confetti.length > 0) {
          rafId = requestAnimationFrame(animate);
        } else {
          rafId = null;
        }
      }

      button.addEventListener("click", (event) => {
        event.preventDefault();
        createCtaRipple(event);
        spawnConfetti();
      });

      createShootingStars();
      resizeCanvas();
      requestParallaxUpdate();
      window.addEventListener("resize", () => {
        resizeCanvas();
        createShootingStars();
        requestParallaxUpdate();
      });
      window.addEventListener("scroll", requestParallaxUpdate, { passive: true });
      if (card) {
        card.addEventListener("scroll", requestParallaxUpdate, { passive: true });
      }
    })();
  </script>
</body>
</html>
